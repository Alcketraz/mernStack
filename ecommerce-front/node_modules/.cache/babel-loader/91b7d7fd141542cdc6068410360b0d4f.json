{"ast":null,"code":"import _objectSpread from \"D:\\\\FINAL_YEAR_PROJECT\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"D:\\\\FINAL_YEAR_PROJECT\\\\ecommerce-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\FINAL_YEAR_PROJECT\\\\ecommerce-front\\\\src\\\\core\\\\Search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getCategories, list } from \"./apiCore\";\nimport Card from \"./Card\";\n\nconst Search = () => {\n  const _useState = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const categories = data.categories,\n        category = data.category,\n        search = data.search,\n        results = data.results,\n        searched = data.searched;\n\n  const loadCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData(_objectSpread({}, data, {\n          categories: data\n        }));\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const searchData = () => {\n    // console.log(search, category);\n    if (search) {\n      list({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData(_objectSpread({}, data, {\n            results: response,\n            searched: true\n          }));\n        }\n      });\n    }\n  };\n\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const handleChange = name => event => {\n    setData(_objectSpread({}, data, {\n      [name]: event.target.value,\n      searched: false\n    }));\n  };\n\n  const searchedProducts = (results = []) => {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mt-4 mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, searchMessage(searched, results)), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, results.map((product, i) => React.createElement(Card, {\n      key: i,\n      product: product,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }))));\n  };\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return \"Found \".concat(results.length, \" products\");\n    }\n\n    if (searched && results.length < 1) {\n      return \"No products found\";\n    }\n  };\n\n  const searchForm = () => React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange(\"category\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"All\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Pick Category\"), categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange(\"search\"),\n    placeholder: \"Search by name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Search\"))));\n\n  return React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, searchForm()), React.createElement(\"div\", {\n    className: \"container-fluid mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, searchedProducts(results)));\n};\n\nexport default Search;","map":{"version":3,"sources":["D:\\FINAL_YEAR_PROJECT\\ecommerce-front\\src\\core\\Search.js"],"names":["React","useState","useEffect","getCategories","list","Card","Search","categories","category","search","results","searched","data","setData","loadCategories","then","error","console","log","searchData","undefined","response","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchedProducts","searchMessage","map","product","i","length","searchForm","c","_id","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setData({ ...data, categories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const searchData = () => {\r\n    // console.log(search, category);\r\n    if (search) {\r\n      list({ search: search || undefined, category: category }).then(\r\n        (response) => {\r\n          if (response.error) {\r\n            console.log(response.error);\r\n          } else {\r\n            setData({ ...data, results: response, searched: true });\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div>\r\n        <h2 className=\"mt-4 mb-4\">{searchMessage(searched, results)}</h2>\r\n        <div className=\"row\">\r\n          {results.map((product, i) => (\r\n            <Card key={i} product={product} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n    if (searched && results.length < 1) {\r\n      return `No products found`;\r\n    }\r\n  };\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit}>\r\n      <span className=\"input-group-text\">\r\n        <div className=\"input-group input-group-lg\">\r\n          <div className=\"input-group-prepend\">\r\n            <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n              <option value=\"All\">Pick Category</option>\r\n              {categories.map((c, i) => (\r\n                <option key={i} value={c._id}>\r\n                  {c.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <input\r\n            type=\"search\"\r\n            className=\"form-control\"\r\n            onChange={handleChange(\"search\")}\r\n            placeholder=\"Search by name\"\r\n          />\r\n        </div>\r\n        <div className=\"btn input-group-append\" style={{ border: \"none\" }}>\r\n          <button className=\"input-group-text\">Search</button>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container mb-3\">{searchForm()}</div>\r\n      <div className=\"container-fluid mb-3\">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}